(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f209d02"],{"04c4":function(t,e,s){},"386b":function(t,e,s){var i=s("5ca1"),a=s("79e5"),n=s("be13"),r=/"/g,o=function(t,e,s,i){var a=String(n(t)),o="<"+e;return""!==s&&(o+=" "+s+'="'+String(i).replace(r,"&quot;")+'"'),o+">"+a+"</"+e+">"};t.exports=function(t,e){var s={};s[t]=e(o),i(i.P+i.F*a(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",s)}},"3e05":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-con"},[s("h2",{staticClass:"title"},[t._v("\n    "+t._s("修改推广链接"==t.$route.name?"修改推广链接":"创建推广链接")+"\n  ")]),s("Form",{staticClass:"form-group",attrs:{model:t.form,"label-position":"right","label-width":100}},[s("FormItem",{attrs:{label:"id",prop:"id"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入id"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id","string"===typeof e?e.trim():e)},expression:"form.id"}})],1),s("FormItem",{attrs:{label:"标题",prop:"title"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"===typeof e?e.trim():e)},expression:"form.title"}})],1),s("FormItem",{attrs:{label:"链接",prop:"link"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入链接"},model:{value:t.link,callback:function(e){t.link="string"===typeof e?e.trim():e},expression:"link"}}),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",size:"large"},on:{click:t.addOne}},[t._v("添加")])],1),s("FormItem",{attrs:{label:"链接组",prop:"links"}},[s("ul",t._l(t.form.links,function(e,i){return s("li",{key:i},[s("span",[t._v(t._s(e))]),s("Button",{attrs:{type:"error",size:"large"},on:{click:function(e){t.deleteLink(i)}}},[t._v("X")])],1)}))]),s("FormItem",{attrs:{label:"返回链接",prop:"back_url"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入返回链接"},model:{value:t.back_url,callback:function(e){t.back_url="string"===typeof e?e.trim():e},expression:"back_url"}}),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",size:"large"},on:{click:t.addBackUrl}},[t._v("添加")])],1),s("FormItem",{attrs:{label:"返回链接组",prop:"back_urls"}},[s("ul",t._l(t.form.back_urls,function(e,i){return s("li",{key:i},[s("span",[t._v(t._s(e))]),s("Button",{attrs:{type:"error",size:"large"},on:{click:function(e){t.deleteBackUrl(i)}}},[t._v("X")])],1)}))]),s("FormItem",{attrs:{label:"是否增加权重",prop:"title"}},[s("i-switch",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),t.type?s("FormItem",{attrs:{label:"权重",prop:"weight"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入权重"},model:{value:t.weight,callback:function(e){t.weight="string"===typeof e?e.trim():e},expression:"weight"}}),s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success",size:"large"},on:{click:t.addWeight}},[t._v("添加")])],1):t._e(),t.type?s("FormItem",{attrs:{label:"权重组",prop:"weights"}},[s("ul",t._l(t.form.weights,function(e,i){return s("li",{key:i,staticClass:"weight"},[t.selectIndex===i?s("div",{staticClass:"input-box"},[s("Input",{attrs:{search:"","enter-button":"保存",placeholder:"请输入权重"},on:{"on-search":function(e){t.changeWeight(i)}},model:{value:t.weight_input,callback:function(e){t.weight_input="string"===typeof e?e.trim():e},expression:"weight_input"}})],1):s("div",[s("span",{on:{click:function(s){t.changeState(e,i)}}},[t._v(t._s(e))]),s("Button",{attrs:{type:"error"},on:{click:function(e){t.deleteWeight(i)}}},[t._v("DEL")])],1)])}))]):t._e(),t.type?s("FormItem",{attrs:{label:"投放状态",prop:"status"}},[s("i-switch",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1):t._e(),t.type?s("FormItem",{attrs:{label:"时间颗粒度",prop:"granularity"}},[s("InputNumber",{staticClass:"inputtxt",attrs:{min:1},model:{value:t.form.granularity,callback:function(e){t.$set(t.form,"granularity","string"===typeof e?e.trim():e)},expression:"form.granularity"}})],1):t._e(),s("FormItem",{attrs:{label:"备注",prop:"remarks"}},[s("Input",{staticClass:"inputtxt",attrs:{size:"large",type:"text",placeholder:"请输入备注"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks","string"===typeof e?e.trim():e)},expression:"form.remarks"}})],1),s("FormItem",{attrs:{label:"选择标签"}},[t.changeTag?s("Tag",{attrs:{name:t.form.group,closable:""},on:{"on-close":t.handleClose}},[t._v(t._s(t.form.group))]):s("Input",{staticStyle:{width:"200px"},attrs:{size:"large",type:"text",placeholder:"请输入分组名"},on:{"on-blur":t.tagConfirm},model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}})],1),s("FormItem",{attrs:{label:"标签选项"}},t._l(t.tagList,function(e,i){return s("Tag",{attrs:{name:e.name,closable:""},on:{"on-close":function(s){t.deleteTag(e,i)}},nativeOn:{click:function(s){t.select(e)}}},[t._v(t._s(e.name)+"\n      ")])})),s("FormItem",["创建推广链接"==t.$route.name?s("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"primary"},on:{click:t.create}},[t._v("立即创建\n      ")]):s("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"primary"},on:{click:t.save}},[t._v("保 存")]),s("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"warning"},on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},a=[],n=(s("b54a"),s("7f7f"),s("cadf"),s("551c"),s("097d"),{data:function(){return{form:{links:[],weights:[],back_urls:[]},link:"",weight:"",type:!1,selectIndex:-1,weight_input:"",status:!1,back_url:"",changeTag:!1,tagList:[]}},mounted:function(){this.showTagList(),"修改推广链接"===this.$route.name&&(this.form=this.$route.params.row,this.type=1==this.form.type,this.status=1==this.form.status,this.form.links||(this.form.links=[]),this.form.weights||(this.form.weights=[]))},methods:{showTagList:function(){var t=this;this.$axios.get("/tuiguangTag").then(function(e){t.tagList=e.data.data})},changeState:function(t,e){this.selectIndex=e,this.weight_input=t},changeWeight:function(t){this.form.weights.splice(t,1,this.weight_input),this.selectIndex=-1},deleteLink:function(t){var e=this;this.$Modal.confirm({title:"提示:",content:"确认删除这条内容吗？",onOk:function(){e.form.links.splice(t,1)}})},addOne:function(){""===this.link?this.$Message.info("链接不能为空"):(this.form.links.push(this.link),this.link="")},deleteWeight:function(t){var e=this;this.$Modal.confirm({title:"提示:",content:"确认删除这条内容吗？",onOk:function(){e.form.weights.splice(t,1)}})},addWeight:function(){""===this.weight?this.$Message.info("权重不能为空"):(this.form.weights.push(this.weight),this.weight="")},addBackUrl:function(){""===this.back_url?this.$Message.info("返回链接不能为空"):(this.form.back_urls.push(this.back_url),this.back_url="")},deleteBackUrl:function(t){var e=this;this.$Modal.confirm({title:"提示:",content:"确认删除这条内容吗？",onOk:function(){e.form.back_urls.splice(t,1)}})},save:function(){var t=this;this.form.type=this.type?1:0,this.form.status=this.status?1:0,this.$axios.post("/transfer/update",this.form).then(function(e){e.data.success?(t.$Message.info(e.data.success),t.$router.push({name:"推广链接",params:{row:t.form,index:t.$route.params.index}}),t.reset()):t.$Message.info(e.data.err)})},create:function(){var t=this;this.form.type=this.type?1:0,this.form.status=this.status?1:0,this.$axios.post("/transfer/create",this.form).then(function(e){e.data.success?(t.$Message.info(e.data.success),t.$router.push({name:"推广链接",params:e.data.data}),t.reset()):t.$Message.info(e.data.err)})},cancel:function(){this.$router.push({name:"推广链接",params:{state:"cancel"}}),this.reset()},reset:function(){this.form={links:[],type:0,weights:[]}},tagConfirm:function(){var t=this;this.changeTag=!0,this.$axios.post("/tuiguangTag",{name:this.form.group}).then(function(e){0==e.data.exist&&t.tagList.push(e.data.data)})},handleClose:function(){this.form.group="",this.changeTag=!1},select:function(t){this.form.group=t.name,this.changeTag=!0},deleteTag:function(t,e){var s=this;this.$Modal.confirm({title:"提示:",content:"确认删除这个分组吗？",onOk:function(){s.$axios.delete("/tuiguangTag",{params:{id:t._id}}).then(function(t){s.tagList.splice(1,e)})}})}}}),r=n,o=(s("d849"),s("2877")),l=Object(o["a"])(r,i,a,!1,null,"32547386",null);l.options.__file="editInfo.vue";e["default"]=l.exports},b54a:function(t,e,s){"use strict";s("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},d849:function(t,e,s){"use strict";var i=s("04c4"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-0f209d02.8b2ad030.js.map